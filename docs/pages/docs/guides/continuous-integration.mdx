---
title: Continuous Integration
description: Recipes for using Turborepo with GitHub Actions, CircleCI, and other continuous integration providers.
---

# Continuous Integration

Turborepo not only speeds up builds, but also your CI pipeline. Below are a few ways to use Turborepo with various Continuous Integration providers.

## GitHub Actions

The following example shows how to use Turborepo with GitHub Actions and pnpm.

```yaml
name: CI

on:
  push:
    branches: ["main"]
  pull_request:
    types: [opened, synchronize]

jobs:
  build:
      name: Build and Test
      timeout-minutes: 15
      runs-on: ${{ matrix.os }}
      # To use Remote Caching, uncomment the next lines and follow the steps below.
      # env:
      #  TURBO_TOKEN: ${{ secrets.TURBO_TOKEN }}
      #  TURBO_TEAM: ${{ secrets.TURBO_TEAM }}
      strategy:
        matrix:
          os: [ubuntu-latest, macos-latest]

      steps:
        - name: Check out code
          uses: actions/checkout@v2
          with:
            fetch-depth: 2

        - uses: pnpm/action-setup@v2.0.1
          with:
            version: 6.32.2

        - name: Setup Node.js environment
          uses: actions/setup-node@v2
          with:
            node-version: 16
            cache: pnpm

        - name: Install dependencies
          run: pnpm install

        - name: Test
          run: pnpm turbo run test
```

## CircleCI

The following example shows how to use Turborepo with CircleCI and yarn.

Start by creating a `.circleci/config.yml` file

```yaml
version: 2.1
orbs:
  node: circleci/node@5.0.2
workflows:
  test:
    jobs:
      - test
jobs:
  test:
    docker:
      - image: cimg/node:lts
    # To use Remote Caching, uncomment the next lines and follow the steps below.
    # environment:
    #  TURBO_TOKEN: $TURBO_TOKEN
    #  TURBO_TEAM: $TURBO_TEAM
    steps:
      - checkout
      - node/install-packages:
          pkg-manager: yarn
      - run:
          command: yarn turbo run test
```

## Travis CI

The following example shows how to use Turborepo with Travis CI and pnpm.

Start by creating a `.travis.yml` file

```yaml
language: node_js
node_js:
  - lts/*
cache:
  npm: false
  directories:
    - "~/.pnpm-store"
before_install:
  - curl -f https://get.pnpm.io/v6.16.js | node - add --global pnpm@7.0.0-rc.9
  - pnpm config set store-dir ~/.pnpm-store
install:
  - pnpm install
```

> The pnpm docs have a section on Travis CI integration, view it [here](https://pnpm.io/continuous-integration#travis)

Travis is fairly automatic and will build the repository based on the specific `build` command in package.json.

For enabling remote caching, follow Travis' [Environment Variable](https://docs.travis-ci.com/user/environment-variables/) guide for setting secure environment variables.

## GitLab CI

The following example shows how to use Turborepo with GitLab CI and pnpm.

Start by creating a `.gitlab-ci.yml` file and configure it with the custom pnpm support provided by the [pnpm docs](https://pnpm.io/continuous-integration#gitlab-ci)

```yaml
image: node:latest

stages:
  - build

build:
  stage: build
  before_script:
    - curl -f https://get.pnpm.io/v6.16.js | node - add --global pnpm@7.0.0-rc.9
    - pnpm config set store-dir .pnpm-store
  script:
    - pnpm install
  cache:
    key: "$CI_COMMIT_REF_SLUG"
    paths:
      - .pnpm-store
```

Remote caching environment variables can be configured through project settings. Follow GitLab's guide [here](https://docs.gitlab.com/ee/ci/variables/index.html#add-a-cicd-variable-to-a-project).

## Remote Caching with Continuous Integration Providers

All of the CI providers included in this section provide some kind of environment variable support which is the only requirement for enabling Turborepo Remote Caching.

The various sample configurations have comments including the environment variable pattern necessary to enable remote caching for the respective CI provider.

To use Vercel Remote Caching, you can get the value of these variables in a few steps:

1. Create a Scoped Access Token to your account in the [Vercel Dashboard](https://vercel.com/account/tokens)

![Vercel Access Tokens](/images/docs/vercel-tokens.png)
![Vercel Access Tokens](/images/docs/vercel-create-token.png)

Copy the value to a safe place. You'll need it in a moment.

2. Go to your CI provider's **Secrets/Environment Variable** setting dashboard. Create a new secret called `TURBO_TOKEN` and enter the value of your Scoped Access Token.

3. Make a second secret called `TURBO_TEAM` and enter the value of your team's Vercel URL (or if you're on Hobby, your personal URL works as well). Do not include the `https://vercel.com/` part, only the slug.

![Vercel Account Slug](/images/docs/vercel-slug.png)

4. In your CI provider configuration file, uncomment the respective environment variable section to enable remote caching.
